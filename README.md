# Process-1

Computer Organization and Operating System Assignment (Chapter : Process, Sec : 1)

  

# บทคัดย่อ

# Boot Process

Boot Process ของ Linux เป็นส่วนสำคัญของฟังก์ชันการทำงาน เนื่องจากเป็นขั้นตอนเริ่มต้นของการเริ่มต้นระบบปฏิบัติการ การทำความเข้าใจกระบวนการบูท Linux ถือเป็นสิ่งสำคัญสำหรับผู้ดูแลระบบ นักพัฒนา และใครก็ตามที่ทำงานกับ Linux

### Boot Process คืออะไร ?
Boot Process เป็นลักษณะพื้นฐานของระบบปฏิบัติการใดๆ เป็นกระบวนการที่ทำการ โหลดระบบปฏิบัติ(OS)ลงในหน่วยความจำ(Memory)ของคอมพิวเตอร์, กำหนดค่าเริ่มต้นของส่วนประกอบต่างๆ และเตรียมที่จะดำเนินการ แอปพลิเคชันของผู้ใช้

Boot process ของ Linux ประกอบด้วยหลายขั้นตอนที่มีความสำคัญต่อการทำงานของระบบปฏิบัติการ ซึ่งขั้นตอนต่างๆ ของกระบวนการบูทใน Linux มีดังนี้
### ขั้นตอน Boot Process ของ Linux
1.  **System startup:**  เป็นขั้นตอนแรกที่เกิดขึ้นเมื่อทำการเปิดเครื่อง มันจ่ายไฟฟ้าให้กับส่วนประกอบหลักทำงาน เช่น BIOS,CMOS,UEFI
2.  **Bootloader stage:** หลังจากขั้นตอนที่ 1 และสถานะของเครื่องปกติ ตัว BIOS,UEFI จะทำการ boot ตัว 
 storage ต่างๆ เพื่อหา bootloader ซึ่งจะทำหน้าที่เลือกและโหลดระบบปฏิบัติการที่จะเริ่มต้น เมื่อผู้ใช้เลือกระบบปฏิบัติการที่ต้องการเริ่มต้น โปรแกรมบูตโลดเดอร์จะโหลด kernel และ initramfs (ถ้ามี)
ใน linux ก็จะมี bootloader หลักๆคือ 
> - LILO  (LInux LOader)
> -   SYSILINUX 
> -   GRUB2 (GRand Unified Bootloader)
3. **Kernel:** หลังจากหา bootloader เจอ ก็จะนำมา เพื่อเริ่มต้น Kernel ขณะนี้ระบบปฏิบัติการจะควบคุมการเข้าถึงทรัพยากรคอมพิวเตอร์ของเราได้แล้ว
4. **Init process:** Kernel จะเริ่มต้นกระบวนการ init ซึ่งจะเริ่มกระบวนการหลัก ในที่นี้ parent ของกระบวนการ Linux ทั้งหมดคือ Systemd ตามขั้นตอนการบูต Systemd จะดำเนินการต่างๆ
# Process Management

### Process Manaagement คืออะไร

Process Management คือ งานในการควบคุมและติดตาม processes ที่ทำงานอยู่บนระบบ Linux โดยรวมไปถึงกระบวนการจัดการทรัพยากร, การจัดลำดับการทำงานบน CPU, และการยกเลิกกระบวนการเมื่อจำเป็น  

### ประเภทของ Processes

#### Foreground processes หรือ interactive processes

processes เหล่านี้จะไม่ได้ intitialize จากระบบต้องถูกดำเนินการโดยผู้ใช้หรือโปรแกรมเมอร์ processes เหล่านี้จะรับ input และส่ง output คืนกลับไป ในขณะที่ processes เหล่านี้กำลังทำงานอยู่เราจะไม่สามารถเริ่ม process ใหม่ได้ใน terminal เดียวกัน

#### Background processes หรือ non interactive processes

processes เหล่านี้จะถูกดำเนินการโดยจากระบบหรือผู้ใช้ก็ได้ processes เหล่านี้มี PID หรือ process เฉพาะและสามารถเริ่ม processes ใน terminal เดียวกันได้

#### สถานะของ process ใน Linux

- **Running :** process ที่กำลังดำเนินการอยู่ใน CPU

- **Sleeping :** process ที่กำลังรอให้ทรัพยากรที่จะใช้นั้นว่าง

-  **Stopped :** process ที่ถูกทำลายโดยผู้ใช้

-  **Zombie :** process ที่ดำเนินการเสร็จเรียบร้อยแล้วแต่ยังไม่ได้ถูกล้างโดยระบบ

-  **Orphan :** process ปัจจุบันที่ parent process ถูกทำลายไปแล้ว  

### คำสั่งของ Process Management ใน Linux

|คำสั่ง|คำอธิบาย|
|----|--------------|
|ps|แสดงข้อมูลเกี่ยวกับ processes ที่ทำงานอยู่|
|top|ให้ข้อมูลแบบ real-time เกี่ยวกับ processes ระบบและทรัพยากรที่ถูกใช้งาน|
|kill|ทำลาย process นั้นโดยการส่งสัญญาณไปยัง process นั้น|
|nice|ปรับลำดับความสำคัญของ process|
|renice|เปลี่ยนลำดับความสำคัญของ process ที่กำลังทำงานอยู่|
|pidof|แสดงหมายเลข ID ของ process|
|jobs|แสดงรายการงานทั้งที่กำลังทำงานหรือหยุดทำงานไปแล้ว|
|bg|สำหรับการส่ง process ที่กำลังทำงานไป background|
|fg|สำหรับการส่ง process ที่กำลังทำงานไป foreground|

### Process Management ในทางปฏิบัติ

#### การระบุและการยุติ processes ใน Linux

การระบุและการยุติ processes สามารถทำได้โดยใช้คำสั่งเหล่านี้ใน Linux
คำสั่ง`PS`ใช้ในการหา process ID (PID) ของ process ที่ต้องการจัดการ ตัวอย่างเช่น ถ้าหากจำเป็นที่ต้องปิด process นั้นก็ต้องรู้ process ID (PID) ของตัวนั้นที่แน่ชัดก่อน  
คำสั่ง`kill`ใช้เพื่อทำลาย processes ด้วย process ID (PID)  
คำสั่ง`killall`ใน Linux ใช้เพื่อทำลาย processes ด้วยชื่อ เป็นการทำลาย process วิธีที่มีประสิทธิภาพโดยมันจะทำการส่งสัญญาณไปยัง processes ตามชื่อที่ได้มีการระบุไว้

#### การจัดลำดับความสำคัญของ Processes ใน Linux
การจัดลำดับความสำคัญของ process ที่กำลังทำงานอยู่สามารถทำได้โดยใช้คำสั่ง `nice`  `renice` ใน Linux  
คำสั่ง`nice`ใน Linux ใช้เพื่อปรับลำดับความสำคัญของ process โดยจะกำหนดลำคัญความสำคัญที่ต่ำกว่าให้กับ process เพื่อลดการใช้ทรัพยากร  
คำสั่ง`renice`ใน Linux ใช้เพื่อปรับลำดับความสำคัญของ process ที่เริ่มการทำงานไปแล้ว โดยสามารรถปรับเพ่ิ่มหรือลดลำดับความสำคัญของ process ได้ขึ้นอยู่กับค่าที่ระบุ
#### การวิเคราะห์ทรัพยากรที่ใช้ใน Linux
คำสั่ง`top`ใน Linux ใช้เพื่อการแสดงข้อมูลเกี่ยวกับ process แบบ real-time ที่ทำงานอยู่บนระบบรวมไปถึงการใช้ CPU และ memory โดยจะมี interface ที่ช่วยให้ผู้ใช้ตรวจสอบและจัดการ processes ได้

  

# Service Management
ใน Linux, บริการ (Service) เป็นสคริปต์ที่ทำงานในพื้นหลัง มันจะตรวจสอบเพื่อรับคำขอที่เข้ามาและส่งคำตอบขึ้นอยู่กับคำขอที่ได้รับอย่างต่อเนื่อง 
บริการแตกต่างจากกระบวนการ (Process) เนื่องจากระบบคือแอปพลิเคชันหรือสคริปต์ที่สามารถทำงานได้ทั้งใน foreground หรือ background


สคริปต์ใดๆนั้นสามารถถูกแปลงเป็นบริการ systemd ที่จะทำงานโดยอัตโนมัติเมื่อระบบเริ่มต้นขึ้น `systemd` ให้เราใช้คำสั่งชุด `systemctl` ซึ่งใช้สำหรับ  
เริ่ม หยุด รีโหลด รีสตาร์ท และตรวจสอบสถานะของบริการ

### Init System
วัตถุประสงค์พื้นฐานของระบบ `Init` คือเริ่มส่วนประกอบที่ต้องเริ่มต้นหลังจากที่ไคเนิล Linux ถูกบูต (ที่รู้จักโดยทั่วไปว่า "userland") ระบบ Init ยังใช้เพื่อจัดการบริการและเดมอนสำหรับเซิร์ฟเวอร์ในทุกจุดขณะที่ระบบกำลังทำงาน

## Systemd 
Systemd เป็นระบบ init และผู้จัดการระบบที่ได้รับความนิยมอย่างแพร่หลายและกลายเป็นมาตรฐานใหม่ของระบบปฏิบัติการ Linux
ใน systemd, หน่วยหลักสำหรับการดำเนินการคือ `units` ซึ่งเป็นทรัพยากรที่ systemd รู้จักจัดการได้ หน่วยถูกจัดประเภทตามประเภทของทรัพยากรที่พวกเขาแสดงแทนและถูกกำหนดด้วยไฟล์ที่เรียกว่าไฟล์หน่วย (Unit files) ประเภทของแต่ละหน่วยสามารถนำมาคาดเดาได้จากคำต่อท้ายที่ปรากฏในไฟล์

สำหรับงานการจัดการบริการ, หน่วยเป้าหมายจะเป็นหน่วยบริการ (Service Units) ซึ่งมีไฟล์หน่วยที่มีคำต่อท้ายเป็น `.service` อย่างไรก็ตาม สำหรับคำสั่งส่วนมากขอการจัดการบริการนั้นสามารถไม่ต่อท้ายด้วย .service ได้ เพราะ systemd รู้ว่าคุณน่าจะต้องการดำเนินการบริการเมื่อใช้คำสั่งการจัดการบริการ

### คุณสมบัติของ Systemd

- การเริ่มต้นอย่างรวดเร็ว
    - Systemd ให้การพาราเลลที่มีระบบทำงานมากกว่า UpStart ลดเวลาที่ใช้ในการบูตระบบปฏิบัติการผ่านการกระตุ้นด้วย Socket และ D-Bus ซึ่งจะลดเวลาที่ใช้ในการบูตระบบปฏิบัติการ

- การกระตุ้นตามคำขอ (On-Demand Activation)
    - ต่างจาก SysVinit, systemd กระตุ้นบริการเมื่อมีคำขอเท่านั้น, ลดการกระตุ้นที่ไม่จำเป็นของกระบวนการบริการพื้นหลังในระหว่างการบูตระบบ นำไปสู่การบูตระบบที่เร็วขึ้นและการใช้ทรัพยากรระบบได้อย่างมีประสิทธิภาพ

- การจัดการวงจรชีวิตของบริการโดย Cgroups
    - Systemd ติดตามและจัดการวงจรชีวิตของบริการโดยใช้ Cgroups ซึ่งทำให้การหยุดบริการง่ายขึ้นด้วย Cgroups, ทำให้แน่ใจได้ว่าบริการที่เกี่ยวข้องถูกใส่ใน Cgroup เดียวกัน, ทำให้ง่ายต่อการค้นหาและหยุดบริการ

- การจัดการจุด Mount และ Automount
    - Systemd จัดการจุด Mount ระบบไฟล์ที่ติดตั้งไว้ใน /etc/fstab ทำให้สามารถ Mount อัตโนมัติในขณะที่ระบบเริ่มต้นที่เข้ากันได้กับ /etc/fstab, และรองรับการ Mount และ Unmount ตามคำขอโดยไม่ต้องการ autofs

- การจัดการขึ้นรายการทำรายการ (Transactional Dependency Management)
    - Systemd จัดการการทำงานพร้อมกันของงานที่มีการขึ้นรายการที่ต่อกันในระหว่างการบูตระบบ มันคำนวณการขึ้นรายการ สร้างธุรกรรมชั่วคราว และตรวจสอบความสอดคล้องกันก่อนที่จะกระตุ้นบริการ ทำให้งานที่มีการขึ้นรายการขึ้นในลำดับที่ถูกต้อง

- ความเข้ากันได้กับสคริปต์ SysVinit
    - Systemd รักษาความเข้ากันได้กับสคริปต์ SysVinit และ LSB initscripts ลดความจำเป็นในการปรับเปลี่ยน services และ processes ระหว่างการย้ายระบบ ช่วยลดต้นทุนจากการเปลี่ยนจากระบบไปสู่ systemd

- สแนปช็อตและการกู้คืนระบบ (System State Snapshots and Restoration)
    - Systemd รองรับการเริ่มต้นตามคำขอ การเปลี่ยนแปลงระบบแบบไดนามิก และการสร้างสแนปช็อตสำหรับสถานะการทำงานปัจจุบันของระบบ สแนปช็อตช่วยให้ระบบสามารถกู้คืนไปยังจุดที่ระบุได้ มีประโยชน์สำหรับการดีบั๊กและสถานการณ์การกู้คืนระบบ

# Task Scheduler

  

# สมาชิก

|รหัสนักศึกษา|ชื่อ-นามสกุล|ส่วนที่รับผิดชอบ|
|----------|---------------|-----------|
|65070110 |นาย นครินทร์ ทิพย์รัตน์| |
|65070175 |นาย ภาณุวิชญ์ คล้ายอุบล| |
|65070183 |นาย ภูวเดช อนันต์คูศรี|Startup process|
|65070204 |นาย วรพล สาดฟัก|Process Management|
|65070226 |นาย ศุภวิชญ์ ปัทมภาสสกุล|Boot Process|
|65070230 |นาย สมิทธิพงศ์ จูปรางค์| |
|65070231 |นาย สรพณ เนตรนันต์|Service Management|

  

# แหล่งอ้างอิง
### Boot Process
- https://www.scaler.com/topics/booting-process-in-linux/
- https://www.baeldung.com/linux/boot-process
- https://en.wikipedia.org/wiki/Booting_process_of_Linux
### Process Management
- https://www.scaler.com/topics/process-management-in-linux/
- https://wwwgeeksforgeeksorg/process-management-in-linux/
- https://unstopcom/blog/process-management-in-linux
### Service Management
- https://schh.medium.com/linux-services-with-systemd-d0252a27ebce
- https://www.digitalocean.com/community/tutorials/how-to-use-systemctl-to-manage-systemd-services-and-units
- https://docs.openeuler.org/en/docs/22.03_LTS_SP1/docs/Administration/service-management.html#systemctl-command
- https://www.geeksforgeeks.org/init-command-in-linux-with-examples/
